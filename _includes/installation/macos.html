<h2>🍎 macOS 安装</h2>

<h3>第一步：安装 Node.js 环境</h3>

<p>Claude Code 需要 Node.js 环境才能运行。</p>

<h4>方法一：使用 Homebrew（推荐）</h4>

<p>如果你已经安装了 Homebrew，使用它安装 Node.js 会更方便：</p>

<pre><code class="language-bash"># 更新 Homebrew
brew update

# 安装 Node.js
brew install node</code></pre>

<h4>方法二：官网下载</h4>

<ol>
<li>访问 <a href="https://nodejs.org/">https://nodejs.org/</a></li>
<li>下载适合 macOS 的 LTS 版本</li>
<li>打开下载的 <code>.pkg</code> 文件</li>
<li>按照安装程序指引完成安装</li>
</ol>

<h4>macOS 注意事项</h4>

<ul>
<li>如果遇到权限问题，可能需要使用 <code>sudo</code></li>
<li>首次运行可能需要在系统偏好设置中允许</li>
<li>建议使用 Terminal 或 iTerm2</li>
</ul>

<h4>验证安装是否成功</h4>

<p>安装完成后，打开 Terminal，输入以下命令：</p>

<pre><code class="language-bash">node --version
npm --version</code></pre>

<p>如果显示版本号，说明安装成功了！</p>

<h3>第二步：安装 Claude Code</h3>

<p>打开 Terminal，运行以下命令：</p>

<pre><code class="language-bash"># 全局安装 Claude Code
npm install -g @anthropic-ai/claude-code</code></pre>

<p>如果遇到权限问题，可以使用 sudo：</p>

<pre><code class="language-bash">sudo npm install -g @anthropic-ai/claude-code</code></pre>

<h4>验证 Claude Code 安装</h4>

<p>安装完成后，输入以下命令检查是否安装成功：</p>

<pre><code class="language-bash">claude --version</code></pre>

<p>如果显示版本号，恭喜你！Claude Code 已经成功安装了。</p>

<h3>第三步：设置环境变量</h3>

<p>为了让 Claude Code 连接到你的中转服务，需要设置两个环境变量。</p>

<h4>方法一：临时设置（当前会话）</h4>

<p>在 Terminal 中运行以下命令：</p>

<pre><code class="language-bash">export ANTHROPIC_BASE_URL="https://use.codecodx.ai/api"
export ANTHROPIC_AUTH_TOKEN="你的API密钥"</code></pre>

<blockquote>
<p>💡 记得将 <strong>"你的API密钥"</strong> 替换为在管理后台 "API Keys" 标签页中创建的实际密钥。</p>
</blockquote>

<h4>方法二：永久设置</h4>

<p>编辑你的 shell 配置文件（根据你使用的 shell）：</p>

<p><strong>对于 zsh（默认）：</strong></p>
<pre><code class="language-bash">echo 'export ANTHROPIC_BASE_URL="https://use.codecodx.ai/api"' >> ~/.zshrc
echo 'export ANTHROPIC_AUTH_TOKEN="你的API密钥"' >> ~/.zshrc
source ~/.zshrc</code></pre>

<p><strong>对于 bash：</strong></p>
<pre><code class="language-bash">echo 'export ANTHROPIC_BASE_URL="https://use.codecodx.ai/api"' >> ~/.bash_profile
echo 'export ANTHROPIC_AUTH_TOKEN="你的API密钥"' >> ~/.bash_profile
source ~/.bash_profile</code></pre>

<h4>验证环境变量设置</h4>

<p>设置完环境变量后，可以通过以下命令验证是否设置成功：</p>

<pre><code class="language-bash">echo $ANTHROPIC_BASE_URL
echo $ANTHROPIC_AUTH_TOKEN</code></pre>

<p><strong>预期输出示例：</strong></p>
<pre><code>https://use.codecodx.ai/api
cr_xxxxxxxxxxxxxxxxxx</code></pre>

<h3>第四步：开始使用 Claude Code</h3>

<p>现在你可以开始使用 Claude Code 了！</p>

<h4>启动 Claude Code</h4>

<pre><code class="language-bash">claude</code></pre>

<h4>在特定项目中使用</h4>

<pre><code class="language-bash"># 进入你的项目目录
cd /path/to/your/project

# 启动 Claude Code
claude</code></pre>

<h3>🔧 macOS 常见问题解决</h3>

<details>
<summary><strong>安装时提示权限错误</strong></summary>

<p><strong>解决方案：</strong></p>
<pre><code class="language-bash"># 使用 sudo 安装
sudo npm install -g @anthropic-ai/claude-code

# 或者修改 npm 权限
sudo chown -R $(whoami) $(npm config get prefix)/{lib/node_modules,bin,share}</code></pre>

</details>

<details>
<summary><strong>macOS 安全设置阻止运行</strong></summary>

<p><strong>解决方案：</strong></p>
<ol>
<li>打开"系统偏好设置" → "安全性与隐私"</li>
<li>在"通用"标签页中，点击"仍要打开"</li>
<li>或者在终端中运行：
   <pre><code class="language-bash">sudo spctl --master-disable</code></pre>
</li>
</ol>

</details>

<details>
<summary><strong>环境变量不生效</strong></summary>

<p><strong>解决方案：</strong></p>
<ol>
<li>确保修改了正确的配置文件（<code>.zshrc</code> 或 <code>.bash_profile</code>）</li>
<li>重新启动终端应用</li>
<li>检查当前使用的 shell：
   <pre><code class="language-bash">echo $SHELL</code></pre>
</li>
</ol>

</details>